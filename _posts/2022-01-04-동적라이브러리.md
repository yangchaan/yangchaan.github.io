---
categories: Programming
---


# 동적 라이브러리

오늘 동적 라이브러리 관련 작은 이슈가 있었다.

원인을 찾으면서 내가 동적 라이브러리에 대해 얕게 알고있어, 여기에 정리해본다.

## 정적 라이브러리(Static Library)란
라이브러리에 포함된 코드가 실행 프로그램 컴파일 시에 포함되어 배포 되는 방식
즉, 라이브러리 안의 모든 함수가 실행파일의 일부가 됨.

## 동적 링크 라이브러리(Dynamic-Link Library)란
정적처럼 컴파일이 아닌 런타임 시에 메로리에 적재되는 방식
실행 프로그램을 컴파일 하면, 라이브러리 자체는 실행파일에 포함되지 않고 분리된 상태로 존재.

## 동적 라이브러리의 장점
 * 라이브러리의 수정이 필요하다면, 정적의 경우 프로그램 자체를 다시 컴파일해서 배포해야하는 정적과 다르게 동적은 라이브러리만 수정해서 배포가 가능함.
 * 실행 프로그램이 정적에 비해 비교적 가벼워짐.
 * 다른 언어로 작성된 프로그램이더라도 함수 호출의 규칙만 지킨다면, 동일한 함수를 사용이 가능.


## 동적 라이브러리의 단점
 * 프로그램 배포 시, 동적 라이브러리 역시 같이 배포되어야 함.
 * 외부 의존도가 발생하기 때문에 이식성이 좋지 않음
 * 성능 저하가 발생할 수 있음



오늘 발생한 이슈의 원인과 관련 내용에 대해 여기에 정리해 본다.

 ## ldconfig
 * runtime때 여러 위치에 존재하는 동적 라이브러리를 연결해주는 dynamic linker를 설정하는 command
 * 리눅스 기준으로 보통 /etc/ld.so.conf 파일을 읽어들여, 동적 링크 디렉토리에 적절한 심볼릭 링크를 설정한 후, 나중에 다른 프로그램이 사용할 캐시를 /etc/ld.so.cache에 작성한다
 * 특정 버전 이상의 Kernel에서는 /etc/ld.so.conf.d/ 디렉토리 내에 .conf 파일 형식으로 설정 가능
 * 동적 링커란 라이브러리 내용을 메모리에 적재 한 후, 런타임 중에 실행 파일에 필요한 라이브러리를 

 이전까지, ldconfig는 동적 라이브러리를 사용하기 이전에 해당 라이브러리를 적용하기 위한 커맨드 정도로만 알고 있었다. 
